<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Singapore's last local COVID-19 case, the current streak of number of cases, and previous streaks.">
    <meta name="keywords" content="COVID, COVID-19, Singapore, Local Cases, Locally Transmitted Cases, Streak">
    <meta name="author" content="Dan Gericke">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"  crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://momentjs.com/downloads/moment.js"></script>

    <title>Last Local COVID-19 Case - Singapore</title>
  </head>
  <body>
       <script type="text/javascript" language="javascript" class="init">
          $(document).ready(function() {
            $.ajax({
              url: "/cases.json",
              dataType: "json",
              success: function (result) {
                if (result['first_start'] === null) {
                  var formattedDate = result['first_end']
                } else {
                  var date = new Date(result['first_start'])
                  date.setDate(date.getDate() - 1);
                  var formattedDate = moment(date).format('DD MMM YYYY');
                }
                $( "#first_streak" ).text(result['first_streak'])
                $( "#first_start" ).text(formattedDate)
                $( "#second_streak" ).text(result['second_streak'])
                $( "#second_start" ).text(result['second_start'])
                $( "#second_end" ).text(result['second_end'])
                $( "#update_time" ).text(result['lastupdated'])
              }
            });
          });
    </script>
    <div class="container">
      <br />
      <div class="text-center">
        <a href="index.html">Main</a> | <a href="about.html">About</a> | <a href="history.html">History</a>
      </div>
      <div class="jumbotron text-center">

          <h1>Days Since the Last<br>
          COVID-19 Case - Singapore</h1>
          <h2>
            <span id="first_streak"></span>
            <br />
            <span id=""></span>
          </h2>
        <p>The last local case was detected on <span id="first_start"></span>.</p>
        <hr>
        <p>
          The previous streak was <b><span id="second_streak"></span> days</b> from <span id="second_start"></span> until <span id="second_end"></span>.
          <br />
          Last update: <span id="update_time"></span>
        </p>
      </div>
      <div class="text-center">
          <a href="https://github.com/artagel/lastlocalcase-sg"><img src="download.png" height="56" width="100" alt="Github Source"/><br />View the code</a>
      </div>
    </div>
  </body>
</html>
